import{_ as V,a as k}from"./ConUeM-o.js";import{_ as C}from"./CsXV8iS9.js";import{e as U,f as B,g as I,o as f,c as g,a as u,b as s,w as x,i as v,h as t,j as N,t as h,k as E,l as R,r as d,n as w}from"./CftujQzW.js";import"./DlAUqK2U.js";import"./C7GMWTSW.js";import"./V3j-_jrj.js";const S={class:"space-y-6"},D={key:0,class:"p-3 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-sm rounded-lg mb-4 text-center"},M={class:"mt-4 text-center text-xs text-gray-400 space-y-1"},j={class:"text-xs text-slate-300 dark:text-slate-600"},$=U({__name:"login",setup(q){const _=B();I();const b=R(),n=d(""),l=d(""),m=d(!1),r=d(""),y=async()=>{m.value=!0,r.value="";try{const{error:a,data:e}=await _.auth.signInWithPassword({email:n.value,password:l.value});if(a)throw a;const o=e.user?.id;if(!o){window.location.href="/login";return}const{data:i}=await _.from("profiles").select("tenants ( slug )").eq("id",o).single(),c=i?.tenants?.slug||"";c?w(`/${c}/agenda`):w("/admin")}catch(a){r.value=a.message||"Error al iniciar sesión"}finally{m.value=!1}};return(a,e)=>{const o=V,i=k,c=C;return f(),g("div",S,[u("form",{onSubmit:N(y,["prevent"]),class:"space-y-6"},[s(i,{label:"Correo Electrónico",name:"email"},{default:x(()=>[s(o,{modelValue:t(n),"onUpdate:modelValue":e[0]||(e[0]=p=>v(n)?n.value=p:null),type:"email",placeholder:"tu@email.com",icon:"i-heroicons-envelope"},null,8,["modelValue"])]),_:1}),s(i,{label:"Contraseña",name:"password"},{default:x(()=>[s(o,{modelValue:t(l),"onUpdate:modelValue":e[1]||(e[1]=p=>v(l)?l.value=p:null),type:"password",placeholder:"********",icon:"i-heroicons-lock-closed"},null,8,["modelValue"])]),_:1}),s(c,{type:"submit",block:"",loading:t(m),label:"Ingresar"},null,8,["loading"])],32),t(r)?(f(),g("div",D,h(t(r)),1)):E("",!0),u("div",M,[e[2]||(e[2]=u("p",null,"¿No tienes cuenta? Contacta a tu administrador.",-1)),u("p",j,"v"+h(t(b).public.appVersion),1)])])}}});export{$ as default};
