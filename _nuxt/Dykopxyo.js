import{_ as y,b as V}from"./fF1gZkpa.js";import{f as k}from"./fAx4d9s_.js";import{k as C,U,a1 as B,c as p,a as u,b as s,w as _,e as t,W as N,t as f,G as S,o as x,V as g,a2 as E,r as c,a3 as I,a4 as R}from"./CX5sY2o7.js";import"./DlAUqK2U.js";import"./CeWU5xK6.js";import"./NczMmp7K.js";const G={class:"space-y-6"},M={key:0,class:"p-3 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-sm rounded-lg mb-4 text-center"},P={class:"mt-4 text-center text-xs text-gray-400 space-y-1"},T={class:"text-xs text-slate-300 dark:text-slate-600"},A=C({__name:"login",setup(W){const v=U();B();const w=E(),n=c(""),l=c(""),m=c(!1),r=c(""),b=async()=>{m.value=!0,r.value="";try{const{error:a}=await v.auth.signInWithPassword({email:n.value,password:l.value});if(a)throw a;const e=I();let o=0;for(;!e.value&&o<10;)await new Promise(i=>setTimeout(i,200)),o++;if(!e.value){window.location.href="/";return}R("/")}catch(a){r.value=a.message||"Error al iniciar sesión"}finally{m.value=!1}};return(a,e)=>{const o=V,i=y,h=k;return x(),p("div",G,[u("form",{onSubmit:N(b,["prevent"]),class:"space-y-6"},[s(i,{label:"Correo Electrónico",name:"email"},{default:_(()=>[s(o,{modelValue:t(n),"onUpdate:modelValue":e[0]||(e[0]=d=>g(n)?n.value=d:null),type:"email",placeholder:"tu@email.com",icon:"i-heroicons-envelope"},null,8,["modelValue"])]),_:1}),s(i,{label:"Contraseña",name:"password"},{default:_(()=>[s(o,{modelValue:t(l),"onUpdate:modelValue":e[1]||(e[1]=d=>g(l)?l.value=d:null),type:"password",placeholder:"********",icon:"i-heroicons-lock-closed"},null,8,["modelValue"])]),_:1}),s(h,{type:"submit",block:"",loading:t(m),label:"Ingresar"},null,8,["loading"])],32),t(r)?(x(),p("div",M,f(t(r)),1)):S("",!0),u("div",P,[e[2]||(e[2]=u("p",null,"¿No tienes cuenta? Contacta a tu administrador.",-1)),u("p",T,"v"+f(t(w).public.appVersion),1)])])}}});export{A as default};
