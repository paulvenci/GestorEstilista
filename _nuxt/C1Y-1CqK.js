import{_ as Ge,b as De}from"./BH9kdvlr.js";import{d as He,f as be,u as Te,_ as ge}from"./Jb28Xoru.js";import{_ as Me}from"./DObld12K.js";import{_ as Re}from"./BIYzKrfT.js";import{_ as qe}from"./ixa2wK3h.js";import{k as M,q as de,r as w,l as Q,j as Ie,m as he,i as T,f as ve,p as We,F as ne,x as xe,A as ye,B as Z,o as S,c as q,I as K,D as U,J as Y,G as H,K as ce,N as fe,w as y,b as h,a as s,E as W,L as Ye,n as we,C as ae,t as F,d as ie,R as Ke,U as Je,a0 as Ce,z as Xe,e as Qe}from"./CGccSeMY.js";import{_ as Be}from"./DlAUqK2U.js";import{b as Ze,f as $e,i as Se,o as z,A as se,N as Pe,T as et,a as G,u as ue,s as tt}from"./90Ut9LIE.js";import{s as at}from"./ptB9EH2A.js";import{O as le,T as re,j as lt,i as nt,P as X,N as D,_ as st}from"./Cz_GaU6p.js";import{u as ot}from"./Lrvz9fIF.js";import{_ as rt}from"./CTiqEUow.js";import"./BYYinPt_.js";import"./CYxRQd5v.js";const it={wrapper:"flex items-center -space-x-px",base:"",rounded:"first:rounded-s-md last:rounded-e-md",default:{size:"sm",activeButton:{color:"primary"},inactiveButton:{color:"white"},firstButton:{color:"white",class:"rtl:[&_span:first-child]:rotate-180",icon:"i-heroicons-chevron-double-left-20-solid"},lastButton:{color:"white",class:"rtl:[&_span:last-child]:rotate-180",icon:"i-heroicons-chevron-double-right-20-solid"},prevButton:{color:"white",class:"rtl:[&_span:first-child]:rotate-180",icon:"i-heroicons-chevron-left-20-solid"},nextButton:{color:"white",class:"rtl:[&_span:last-child]:rotate-180",icon:"i-heroicons-chevron-right-20-solid"}}},ut={wrapper:"relative space-y-2",container:"relative w-full",base:"focus:outline-none",list:{base:"relative",background:"bg-gray-100 dark:bg-gray-800",rounded:"rounded-lg",shadow:"",padding:"p-1",height:"h-10",width:"w-full",marker:{wrapper:"absolute top-[4px] left-[4px] duration-200 ease-out focus:outline-none",base:"w-full h-full",background:"bg-white dark:bg-gray-900",rounded:"rounded-md",shadow:"shadow-sm"},tab:{base:"relative inline-flex items-center justify-center flex-shrink-0 w-full ui-focus-visible:outline-0 ui-focus-visible:ring-2 ui-focus-visible:ring-primary-500 dark:ui-focus-visible:ring-primary-400 ui-not-focus-visible:outline-none focus:outline-none disabled:cursor-not-allowed disabled:opacity-75 transition-colors duration-200 ease-out",background:"",active:"text-gray-900 dark:text-white",inactive:"text-gray-500 dark:text-gray-400",height:"h-8",padding:"px-3",size:"text-sm",font:"font-medium",rounded:"rounded-md",shadow:"",icon:"w-4 h-4 flex-shrink-0 me-2"}}};let dt=M({props:{onFocus:{type:Function,required:!0}},setup(e){let p=w(!0);return()=>p.value?de($e,{as:"button",type:"button",features:Ze.Focusable,onFocus(C){C.preventDefault();let k,f=50;function i(){var a;if(f--<=0){k&&cancelAnimationFrame(k);return}if((a=e.onFocus)!=null&&a.call(e)){p.value=!1,cancelAnimationFrame(k);return}k=requestAnimationFrame(i)}k=requestAnimationFrame(i)}}):null}});var ct=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(ct||{}),ft=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(ft||{});let Oe=Symbol("TabsContext");function oe(e){let p=he(Oe,null);if(p===null){let C=new Error(`<${e} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(C,oe),C}return p}let ke=Symbol("TabsSSRContext"),mt=M({name:"TabGroup",emits:{change:e=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:p,attrs:C,emit:k}){var f;let i=w((f=e.selectedIndex)!=null?f:e.defaultIndex),a=w([]),l=w([]),u=T(()=>e.selectedIndex!==null),$=T(()=>u.value?e.selectedIndex:i.value);function _(n){var c;let b=le(d.tabs.value,z),r=le(d.panels.value,z),x=b.filter(O=>{var I;return!((I=z(O))!=null&&I.hasAttribute("disabled"))});if(n<0||n>b.length-1){let O=ue(i.value===null?0:Math.sign(n-i.value),{[-1]:()=>1,0:()=>ue(Math.sign(n),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),I=ue(O,{0:()=>b.indexOf(x[0]),1:()=>b.indexOf(x[x.length-1])});I!==-1&&(i.value=I),d.tabs.value=b,d.panels.value=r}else{let O=b.slice(0,n),I=[...b.slice(n),...O].find(L=>x.includes(L));if(!I)return;let o=(c=b.indexOf(I))!=null?c:d.selectedIndex.value;o===-1&&(o=d.selectedIndex.value),i.value=o,d.tabs.value=b,d.panels.value=r}}let d={selectedIndex:T(()=>{var n,c;return(c=(n=i.value)!=null?n:e.defaultIndex)!=null?c:null}),orientation:T(()=>e.vertical?"vertical":"horizontal"),activation:T(()=>e.manual?"manual":"auto"),tabs:a,panels:l,setSelectedIndex(n){$.value!==n&&k("change",n),u.value||_(n)},registerTab(n){var c;if(a.value.includes(n))return;let b=a.value[i.value];if(a.value.push(n),a.value=le(a.value,z),!u.value){let r=(c=a.value.indexOf(b))!=null?c:i.value;r!==-1&&(i.value=r)}},unregisterTab(n){let c=a.value.indexOf(n);c!==-1&&a.value.splice(c,1)},registerPanel(n){l.value.includes(n)||(l.value.push(n),l.value=le(l.value,z))},unregisterPanel(n){let c=l.value.indexOf(n);c!==-1&&l.value.splice(c,1)}};xe(Oe,d);let m=w({tabs:[],panels:[]}),V=w(!1);Q(()=>{V.value=!0}),xe(ke,T(()=>V.value?null:m.value));let v=T(()=>e.selectedIndex);return Q(()=>{ve([v],()=>{var n;return _((n=e.selectedIndex)!=null?n:e.defaultIndex)},{immediate:!0})}),We(()=>{if(!u.value||$.value==null||d.tabs.value.length<=0)return;let n=le(d.tabs.value,z);n.some((c,b)=>z(d.tabs.value[b])!==z(c))&&d.setSelectedIndex(n.findIndex(c=>z(c)===z(d.tabs.value[$.value])))}),()=>{let n={selectedIndex:i.value};return de(ne,[a.value.length<=0&&de(dt,{onFocus:()=>{for(let c of a.value){let b=z(c);if(b?.tabIndex===0)return b.focus(),!0}return!1}}),se({theirProps:{...C,...et(e,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:n,slots:p,attrs:C,name:"TabGroup"})])}}}),pt=M({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:p,slots:C}){let k=oe("TabList");return()=>{let f={selectedIndex:k.selectedIndex.value},i={role:"tablist","aria-orientation":k.orientation.value};return se({ourProps:i,theirProps:e,slot:f,attrs:p,slots:C,name:"TabList"})}}}),vt=M({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{attrs:p,slots:C,expose:k}){var f;let i=(f=e.id)!=null?f:`headlessui-tabs-tab-${Se()}`,a=oe("Tab"),l=w(null);k({el:l,$el:l}),Q(()=>a.registerTab(l)),Ie(()=>a.unregisterTab(l));let u=he(ke),$=T(()=>{if(u.value){let r=u.value.tabs.indexOf(i);return r===-1?u.value.tabs.push(i)-1:r}return-1}),_=T(()=>{let r=a.tabs.value.indexOf(l);return r===-1?$.value:r}),d=T(()=>_.value===a.selectedIndex.value);function m(r){var x;let O=r();if(O===re.Success&&a.activation.value==="auto"){let I=(x=nt(l))==null?void 0:x.activeElement,o=a.tabs.value.findIndex(L=>z(L)===I);o!==-1&&a.setSelectedIndex(o)}return O}function V(r){let x=a.tabs.value.map(O=>z(O)).filter(Boolean);if(r.key===G.Space||r.key===G.Enter){r.preventDefault(),r.stopPropagation(),a.setSelectedIndex(_.value);return}switch(r.key){case G.Home:case G.PageUp:return r.preventDefault(),r.stopPropagation(),m(()=>X(x,D.First));case G.End:case G.PageDown:return r.preventDefault(),r.stopPropagation(),m(()=>X(x,D.Last))}if(m(()=>ue(a.orientation.value,{vertical(){return r.key===G.ArrowUp?X(x,D.Previous|D.WrapAround):r.key===G.ArrowDown?X(x,D.Next|D.WrapAround):re.Error},horizontal(){return r.key===G.ArrowLeft?X(x,D.Previous|D.WrapAround):r.key===G.ArrowRight?X(x,D.Next|D.WrapAround):re.Error}}))===re.Success)return r.preventDefault()}let v=w(!1);function n(){var r;v.value||(v.value=!0,!e.disabled&&((r=z(l))==null||r.focus({preventScroll:!0}),a.setSelectedIndex(_.value),lt(()=>{v.value=!1})))}function c(r){r.preventDefault()}let b=at(T(()=>({as:e.as,type:p.type})),l);return()=>{var r,x;let O={selected:d.value,disabled:(r=e.disabled)!=null?r:!1},{...I}=e,o={ref:l,onKeydown:V,onMousedown:c,onClick:n,id:i,role:"tab",type:b.value,"aria-controls":(x=z(a.panels.value[_.value]))==null?void 0:x.id,"aria-selected":d.value,tabIndex:d.value?0:-1,disabled:e.disabled?!0:void 0};return se({ourProps:o,theirProps:I,slot:O,attrs:p,slots:C,name:"Tab"})}}}),bt=M({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:p,attrs:C}){let k=oe("TabPanels");return()=>{let f={selectedIndex:k.selectedIndex.value};return se({theirProps:e,ourProps:{},slot:f,attrs:C,slots:p,name:"TabPanels"})}}}),gt=M({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(e,{attrs:p,slots:C,expose:k}){var f;let i=(f=e.id)!=null?f:`headlessui-tabs-panel-${Se()}`,a=oe("TabPanel"),l=w(null);k({el:l,$el:l}),Q(()=>a.registerPanel(l)),Ie(()=>a.unregisterPanel(l));let u=he(ke),$=T(()=>{if(u.value){let m=u.value.panels.indexOf(i);return m===-1?u.value.panels.push(i)-1:m}return-1}),_=T(()=>{let m=a.panels.value.indexOf(l);return m===-1?$.value:m}),d=T(()=>_.value===a.selectedIndex.value);return()=>{var m;let V={selected:d.value},{tabIndex:v,...n}=e,c={ref:l,id:i,role:"tabpanel","aria-labelledby":(m=z(a.tabs.value[_.value]))==null?void 0:m.id,tabIndex:d.value?v:-1};return!d.value&&e.unmount&&!e.static?de($e,{as:"span","aria-hidden":!0,...c}):se({ourProps:c,theirProps:n,slot:V,attrs:p,slots:C,features:Pe.Static|Pe.RenderStrategy,visible:d.value,name:"TabPanel"})}}});const R=ye(Z.ui.strategy,Z.ui.pagination,it),ht=ye(Z.ui.strategy,Z.ui.button,He),yt=M({components:{UButton:be},inheritAttrs:!1,props:{modelValue:{type:Number,required:!0},pageCount:{type:Number,default:10},total:{type:Number,required:!0},max:{type:Number,default:7,validate(e){return e>=5&&e<Number.MAX_VALUE}},disabled:{type:Boolean,default:!1},size:{type:String,default:()=>R.default.size,validator(e){return Object.keys(ht.size).includes(e)}},to:{type:Function,default:null},activeButton:{type:Object,default:()=>R.default.activeButton},inactiveButton:{type:Object,default:()=>R.default.inactiveButton},showFirst:{type:Boolean,default:!1},showLast:{type:Boolean,default:!1},firstButton:{type:Object,default:()=>R.default.firstButton},lastButton:{type:Object,default:()=>R.default.lastButton},prevButton:{type:Object,default:()=>R.default.prevButton},nextButton:{type:Object,default:()=>R.default.nextButton},divider:{type:String,default:"…"},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{emit:p}){const{ui:C,attrs:k}=Te("pagination",fe(e,"ui"),R,fe(e,"class")),f=T({get(){return e.modelValue},set(v){p("update:modelValue",v)}}),i=T(()=>Array.from({length:Math.ceil(e.total/e.pageCount)},(v,n)=>n+1)),a=T(()=>{const v=i.value.length,n=f.value,c=Math.max(e.max,5),b=Math.floor((Math.min(c,v)-5)/2),r=n-b,x=n+b,O=r-1>1,I=x+1<v,o=[];if(v<=c){for(let L=1;L<=v;L++)o.push(L);return o}if(o.push(1),O&&o.push(e.divider),!I){const L=n+b+2-v;for(let j=n-b-L;j<=n-b-1;j++)o.push(j)}for(let L=Math.max(2,r);L<=Math.min(v,x);L++)o.push(L);if(!O){const L=1-(n-b-2);for(let j=n+b+1;j<=n+b+L;j++)o.push(j)}return I&&o.push(e.divider),x<v&&o.push(v),o.length>=3&&o[1]===e.divider&&o[2]===3&&(o[1]=2),o.length>=3&&o[o.length-2]===e.divider&&o[o.length-1]===o.length&&(o[o.length-2]=o.length-1),o}),l=T(()=>f.value>1),u=T(()=>f.value<i.value.length);function $(){l.value&&(f.value=1)}function _(){u.value&&(f.value=i.value.length)}function d(v){typeof v!="string"&&(f.value=v)}function m(){l.value&&f.value--}function V(){u.value&&f.value++}return{ui:C,attrs:k,currentPage:f,pages:i,displayedPages:a,canGoLastOrNext:u,canGoFirstOrPrev:l,onClickPrev:m,onClickNext:V,onClickPage:d,onClickFirst:$,onClickLast:_}}});function kt(e,p,C,k,f,i){const a=be;return S(),q("div",Y({class:e.ui.wrapper},e.attrs),[K(e.$slots,"first",{onClick:e.onClickFirst,canGoFirst:e.canGoFirstOrPrev},()=>[e.firstButton&&e.showFirst?(S(),U(a,Y({key:0,size:e.size,to:e.to?.(1),disabled:!e.canGoFirstOrPrev||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.firstButton||{},...e.firstButton},{ui:{rounded:""},"aria-label":"First",onClick:e.onClickFirst}),null,16,["size","to","disabled","class","onClick"])):H("",!0)]),K(e.$slots,"prev",{onClick:e.onClickPrev,canGoPrev:e.canGoFirstOrPrev},()=>[e.prevButton?(S(),U(a,Y({key:0,size:e.size,to:e.to?.(e.currentPage-1),disabled:!e.canGoFirstOrPrev||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.prevButton||{},...e.prevButton},{ui:{rounded:""},"aria-label":"Prev",onClick:e.onClickPrev}),null,16,["size","to","disabled","class","onClick"])):H("",!0)]),(S(!0),q(ne,null,ce(e.displayedPages,(l,u)=>(S(),U(a,Y({key:`${l}-${u}`,to:typeof l=="number"?e.to?.(l):null,size:e.size,disabled:e.disabled,label:`${l}`},{ref_for:!0},l===e.currentPage?{...e.ui.default.activeButton||{},...e.activeButton}:{...e.ui.default.inactiveButton||{},...e.inactiveButton},{class:[{"pointer-events-none":typeof l=="string","z-[1]":l===e.currentPage},e.ui.base,e.ui.rounded],ui:{rounded:""},onClick:()=>e.onClickPage(l)}),null,16,["to","size","disabled","label","class","onClick"]))),128)),K(e.$slots,"next",{onClick:e.onClickNext,canGoNext:e.canGoLastOrNext},()=>[e.nextButton?(S(),U(a,Y({key:0,size:e.size,to:e.to?.(e.currentPage+1),disabled:!e.canGoLastOrNext||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.nextButton||{},...e.nextButton},{ui:{rounded:""},"aria-label":"Next",onClick:e.onClickNext}),null,16,["size","to","disabled","class","onClick"])):H("",!0)]),K(e.$slots,"last",{onClick:e.onClickLast,canGoLast:e.canGoLastOrNext},()=>[e.lastButton&&e.showLast?(S(),U(a,Y({key:0,size:e.size,to:e.to?.(e.pages.length),disabled:!e.canGoLastOrNext||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.lastButton||{},...e.lastButton},{ui:{rounded:""},"aria-label":"Last",onClick:e.onClickLast}),null,16,["size","to","disabled","class","onClick"])):H("",!0)])],16)}const _t=Be(yt,[["render",kt]]),xt=ye(Z.ui.strategy,Z.ui.tabs,ut),wt=M({components:{UIcon:ge,HTabGroup:mt,HTabList:pt,HTab:vt,HTabPanels:bt,HTabPanel:gt},inheritAttrs:!1,props:{modelValue:{type:Number,default:void 0},orientation:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},defaultIndex:{type:Number,default:0},items:{type:Array,default:()=>[]},unmount:{type:Boolean,default:!1},content:{type:Boolean,default:!0},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:p}){const{ui:C,attrs:k}=Te("tabs",fe(e,"ui"),xt,fe(e,"class")),f=w(),i=w([]),a=w(),l=w(e.modelValue||e.defaultIndex);function u(_){const d=i.value[_]?.$el;d&&a.value&&(a.value.style.top=`${d.offsetTop}px`,a.value.style.left=`${d.offsetLeft}px`,a.value.style.width=`${d.offsetWidth}px`,a.value.style.height=`${d.offsetHeight}px`)}function $(_){l.value=_,p("change",_),e.modelValue!==void 0&&p("update:modelValue",l.value),u(l.value)}return ot(f,()=>{u(l.value)}),ve(()=>e.modelValue,_=>{l.value=_,u(l.value)}),ve(()=>e.items,async()=>{await we(),u(l.value)},{deep:!0}),Q(async()=>{await we(),u(l.value)}),tt(()=>Ke()),{ui:C,attrs:k,listRef:f,itemRefs:i,markerRef:a,selectedIndex:l,onChange:$}}}),Ct=["aria-label"],Pt={class:"truncate"};function Tt(e,p,C,k,f,i){const a=ge,l=ae("HTab"),u=ae("HTabList"),$=ae("HTabPanel"),_=ae("HTabPanels"),d=ae("HTabGroup");return S(),U(d,Y({vertical:e.orientation==="vertical","selected-index":e.selectedIndex,as:"div",class:e.ui.wrapper},e.attrs,{onChange:e.onChange}),{default:y(()=>[h(u,{ref:"listRef",class:W([e.ui.list.base,e.ui.list.background,e.ui.list.rounded,e.ui.list.shadow,e.ui.list.padding,e.ui.list.width,e.orientation==="horizontal"&&e.ui.list.height,e.orientation==="horizontal"&&"inline-grid items-center"]),style:Ye([e.orientation==="horizontal"&&`grid-template-columns: repeat(${e.items.length}, minmax(0, 1fr))`])},{default:y(()=>[s("div",{ref:"markerRef",class:W(e.ui.list.marker.wrapper)},[s("div",{class:W([e.ui.list.marker.base,e.ui.list.marker.background,e.ui.list.marker.rounded,e.ui.list.marker.shadow])},null,2)],2),(S(!0),q(ne,null,ce(e.items,(m,V)=>(S(),U(l,{key:V,ref_for:!0,ref:"itemRefs",disabled:m.disabled,as:"template"},{default:y(({selected:v,disabled:n})=>[s("button",{"aria-label":m.ariaLabel,class:W([e.ui.list.tab.base,e.ui.list.tab.background,e.ui.list.tab.height,e.ui.list.tab.padding,e.ui.list.tab.size,e.ui.list.tab.font,e.ui.list.tab.rounded,e.ui.list.tab.shadow,v?e.ui.list.tab.active:e.ui.list.tab.inactive])},[K(e.$slots,"icon",{item:m,index:V,selected:v,disabled:n},()=>[m.icon?(S(),U(a,{key:0,name:m.icon,class:W(e.ui.list.tab.icon)},null,8,["name","class"])):H("",!0)]),K(e.$slots,"default",{item:m,index:V,selected:v,disabled:n},()=>[s("span",Pt,F(m.label),1)])],10,Ct)]),_:2},1032,["disabled"]))),128))]),_:3},8,["class","style"]),e.content?(S(),U(_,{key:0,class:W(e.ui.container)},{default:y(()=>[(S(!0),q(ne,null,ce(e.items,(m,V)=>(S(),U($,{key:V,class:W(e.ui.base),unmount:e.unmount},{default:y(({selected:v})=>[K(e.$slots,m.slot||"item",{item:m,index:V,selected:v},()=>[ie(F(m.content),1)])]),_:2},1032,["class","unmount"]))),128))]),_:3},8,["class"])):H("",!0)]),_:3},16,["vertical","selected-index","class","onChange"])}const It=Be(wt,[["render",Tt]]),Bt={class:"space-y-6"},$t={class:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4"},St={class:"flex flex-col md:flex-row gap-4 items-end md:items-center"},Ot={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Vt={class:"flex items-center gap-4"},Lt={class:"p-3 bg-emerald-100 dark:bg-emerald-800 rounded-full"},Ft={class:"text-2xl font-bold text-emerald-900 dark:text-white"},zt={class:"flex items-center gap-4"},Nt={class:"p-3 bg-blue-100 dark:bg-blue-800 rounded-full"},Et={class:"text-2xl font-bold text-blue-900 dark:text-white"},Ut={class:"flex items-center gap-4"},jt={class:"p-3 bg-purple-100 dark:bg-purple-800 rounded-full"},At={class:"text-2xl font-bold text-purple-900 dark:text-white"},Gt={class:"w-full"},Dt={class:"p-4 border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-800/50 flex justify-between items-center"},Ht={class:"flex items-center gap-2"},Mt={class:"font-bold text-emerald-600 dark:text-emerald-400"},Rt={class:"font-bold text-emerald-600 dark:text-emerald-400"},qt={class:"font-bold text-slate-800 dark:text-slate-200"},Wt={class:"space-y-1"},Yt={class:"text-slate-600 dark:text-slate-300"},Kt={class:"text-slate-700 dark:text-slate-300"},Jt={class:"text-slate-700 dark:text-slate-300"},Xt={class:"p-4 border-t border-slate-100 dark:border-slate-800 flex justify-center"},Qt={class:"flex justify-between items-center"},Zt={key:0,class:"space-y-4"},ea={class:"p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded border border-emerald-100 dark:border-emerald-800"},ta={class:"text-lg font-bold text-emerald-900 dark:text-white"},aa={class:"flex justify-between mt-2 text-sm"},la={class:"font-bold"},na={class:"flex justify-end gap-2 pt-4"},pe=10,ya=M({__name:"sales",setup(e){const p=Je(),C=Ce("headerTitle",()=>"Caja");C.value="Caja";const k=new Date,f=w(new Date(k.getFullYear(),k.getMonth(),1).toISOString().slice(0,10)),i=w(new Date(k.getFullYear(),k.getMonth()+1,0).toISOString().slice(0,10)),a=w(""),l=w(1),u=w({column:"created_at",direction:"desc"}),$=w(!1),_=w([]),d=[{key:"transactions",label:"Transacciones",icon:"i-heroicons-list-bullet"}],m=T(()=>{let g=[..._.value];if(a.value){const t=a.value.toLowerCase();g=g.filter(B=>B.clients?.full_name?.toLowerCase().includes(t)||B.profiles?.full_name?.toLowerCase().includes(t)||B.payment_method?.toLowerCase().includes(t))}return u.value&&g.sort((t,B)=>{let E=t[u.value.column],A=B[u.value.column];return u.value.column==="client_name"?(E=t.clients?.full_name,A=B.clients?.full_name):u.value.column==="stylist_name"&&(E=t.profiles?.full_name,A=B.profiles?.full_name),E<A?u.value.direction==="asc"?-1:1:E>A?u.value.direction==="asc"?1:-1:0}),g}),V=T(()=>{const g=(l.value-1)*pe,t=g+pe;return m.value.slice(g,t)}),v=[{key:"created_at",label:"Fecha",sortable:!0},{key:"client_name",label:"Cliente",sortable:!0},{key:"stylist_name",label:"Estilista",sortable:!0},{key:"details",label:"Detalle"},{key:"payment_method",label:"Método",sortable:!0},{key:"stylist_earnings",label:"Ganado (Estilista)"},{key:"commission_amount",label:"Ganado (Peluquería)",sortable:!0},{key:"total_amount",label:"Total",sortable:!0}],n=Ce("userRole"),c=async()=>{$.value=!0;const{data:{user:g}}=await p.auth.getUser();if(!g){$.value=!1;return}let t=p.from("transactions").select("*, clients(full_name), profiles(full_name, commission_type), transaction_items(name, quantity, item_type)").gte("created_at",`${f.value}T00:00:00`).lte("created_at",`${i.value}T23:59:59`).order("created_at",{ascending:!1});n.value!=="admin"&&(t=t.eq("stylist_id",g.id));const{data:B,error:E}=await t;E&&console.error("Error fetching transactions:",E),B&&(_.value=B),$.value=!1},b=T(()=>_.value.reduce((g,t)=>g+(Number(t.total_amount)||0),0)),r=T(()=>_.value.reduce((g,t)=>g+(Number(t.commission_amount)||0),0)),x=w(!1),O=w(!1),I=w(null),o=Xe({amount:0,notes:"",date:new Date().toISOString().slice(0,10)}),L=async()=>{if(!I.value)return;O.value=!0;const{data:{user:g}}=await p.auth.getUser(),t=I.value.tenant_id;try{const{error:B}=await p.from("commission_payouts").insert({tenant_id:t,stylist_id:I.value.id,amount:o.amount,notes:o.notes,date:o.date});if(B)throw B;alert("Pago registrado correctamente"),x.value=!1,c()}catch(B){alert("Error al registrar pago: "+B.message)}finally{O.value=!1}},j=w(!1),Ve=async()=>{if(confirm("¿Estás seguro de que deseas ELIMINAR TODO EL HISTORIAL DE VENTAS Y PAGOS? esta acción no se puede deshacer y es solo para fines de pruebas o reinicio.")){j.value=!0;try{const{error:g}=await p.from("transactions").delete().neq("id","00000000-0000-0000-0000-000000000000");if(g)throw g;const{error:t}=await p.from("commission_payouts").delete().neq("id","00000000-0000-0000-0000-000000000000");if(t)throw t;alert("Historial eliminado correctamente."),c()}catch(g){alert("Error al eliminar historial: "+g.message)}finally{j.value=!1}}},J=g=>new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP",minimumFractionDigits:0}).format(g),Le=g=>new Date(g).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),Fe=g=>({cash:"Efectivo",card:"Tarjeta",transfer:"Transferencia",other:"Otro"})[g]||g,ze=g=>({cash:"green",card:"blue",transfer:"purple",other:"gray"})[g]||"gray";return Q(()=>{c()}),(g,t)=>{const B=De,E=Ge,A=be,me=ge,ee=Me,_e=Re,Ne=qe,Ee=_t,Ue=It,je=rt,Ae=st;return S(),q("div",Bt,[s("div",$t,[t[11]||(t[11]=s("div",{class:"hidden md:block"},[s("h1",{class:"text-xl md:text-3xl font-extrabold text-slate-900 dark:text-white tracking-tight"},"Caja y Ventas"),s("p",{class:"text-slate-500 dark:text-slate-400"},"Registro de transacciones y comisiones")],-1)),s("div",St,[h(E,{label:"Desde"},{default:y(()=>[h(B,{type:"date",modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=N=>f.value=N)},null,8,["modelValue"])]),_:1}),h(E,{label:"Hasta"},{default:y(()=>[h(B,{type:"date",modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=N=>i.value=N)},null,8,["modelValue"])]),_:1}),h(A,{icon:"i-heroicons-funnel",color:"emerald",onClick:c,loading:$.value,label:"Filtrar"},null,8,["loading"]),Qe(n)==="admin"?(S(),U(A,{key:0,icon:"i-heroicons-trash",color:"red",variant:"soft",label:"Limpiar Historial",loading:j.value,onClick:Ve,class:"ml-auto"},null,8,["loading"])):H("",!0)])]),s("div",Ot,[h(ee,{ui:{background:"bg-emerald-50 dark:bg-emerald-900/20",ring:"ring-1 ring-emerald-200 dark:ring-emerald-800"}},{default:y(()=>[s("div",Vt,[s("div",Lt,[h(me,{name:"i-heroicons-currency-dollar",class:"text-3xl text-emerald-600 dark:text-emerald-300"})]),s("div",null,[t[12]||(t[12]=s("p",{class:"text-sm font-medium text-emerald-600 dark:text-emerald-400"},"Ventas Totales (Mes)",-1)),s("p",Ft,F(J(b.value)),1)])])]),_:1}),h(ee,{ui:{background:"bg-blue-50 dark:bg-blue-900/20",ring:"ring-1 ring-blue-200 dark:ring-blue-800"}},{default:y(()=>[s("div",zt,[s("div",Nt,[h(me,{name:"i-heroicons-user-group",class:"text-3xl text-blue-600 dark:text-blue-300"})]),s("div",null,[t[13]||(t[13]=s("p",{class:"text-sm font-medium text-blue-600 dark:text-blue-400"},"Transacciones",-1)),s("p",Et,F(_.value.length),1)])])]),_:1}),h(ee,{ui:{background:"bg-purple-50 dark:bg-purple-900/20",ring:"ring-1 ring-purple-200 dark:ring-purple-800"}},{default:y(()=>[s("div",Ut,[s("div",jt,[h(me,{name:"i-heroicons-banknotes",class:"text-3xl text-purple-600 dark:text-purple-300"})]),s("div",null,[t[14]||(t[14]=s("p",{class:"text-sm font-medium text-purple-600 dark:text-purple-400"},"Comisiones Totales",-1)),s("p",At,F(J(r.value)),1)])])]),_:1})]),h(Ue,{items:d,class:"w-full"},{item:y(({item:N})=>[s("div",Gt,[N.key==="transactions"?(S(),U(ee,{key:0,shadow:"md",ui:{body:{padding:"p-0"},background:"bg-white dark:bg-slate-900",ring:"ring-1 ring-slate-200 dark:ring-slate-800"}},{default:y(()=>[s("div",Dt,[t[15]||(t[15]=s("h3",{class:"font-bold text-slate-700 dark:text-slate-300"},"Historial de Transacciones",-1)),s("div",Ht,[h(B,{modelValue:a.value,"onUpdate:modelValue":t[2]||(t[2]=P=>a.value=P),icon:"i-heroicons-magnifying-glass",placeholder:"Buscar cliente, estilista...",size:"sm"},null,8,["modelValue"]),h(A,{icon:"i-heroicons-arrow-path",variant:"ghost",color:"gray",onClick:c,loading:$.value},null,8,["loading"])])]),h(Ne,{rows:V.value,columns:v,loading:$.value,sort:u.value,"onUpdate:sort":t[3]||(t[3]=P=>u.value=P),"sort-mode":"manual",class:"w-full",ui:{divide:"divide-y divide-slate-200 dark:divide-slate-800",th:{color:"text-slate-900 dark:text-white"},td:{color:"text-slate-500 dark:text-slate-400"}}},{"stylist_earnings-data":y(({row:P})=>[s("span",Mt,F(J((P.total_amount||0)-(P.commission_amount||0))),1)]),"commission_amount-data":y(({row:P})=>[s("span",Rt,F(J(P.commission_amount)),1)]),"total_amount-data":y(({row:P})=>[s("span",qt,F(J(P.total_amount)),1)]),"details-data":y(({row:P})=>[s("div",Wt,[(S(!0),q(ne,null,ce(P.transaction_items,te=>(S(),q("div",{key:te.name,class:"text-xs"},[h(_e,{color:te.item_type==="service"?"blue":"purple",variant:"subtle",size:"xs",class:"mr-1"},{default:y(()=>[ie(F(te.item_type==="service"?"S":"P"),1)]),_:2},1032,["color"]),s("span",Yt,F(te.name)+" (x"+F(te.quantity)+")",1)]))),128))])]),"client_name-data":y(({row:P})=>[s("span",Kt,F(P.clients?.full_name||"-"),1)]),"stylist_name-data":y(({row:P})=>[s("span",Jt,F(P.profiles?.full_name||"-"),1)]),"created_at-data":y(({row:P})=>[ie(F(Le(P.created_at)),1)]),"payment_method-data":y(({row:P})=>[h(_e,{color:ze(P.payment_method),variant:"subtle"},{default:y(()=>[ie(F(Fe(P.payment_method)),1)]),_:2},1032,["color"])]),_:1},8,["rows","loading","sort"]),s("div",Xt,[h(Ee,{modelValue:l.value,"onUpdate:modelValue":t[4]||(t[4]=P=>l.value=P),"page-count":pe,total:m.value.length},null,8,["modelValue","total"])])]),_:1})):H("",!0)])]),_:1}),h(Ae,{modelValue:x.value,"onUpdate:modelValue":t[10]||(t[10]=N=>x.value=N)},{default:y(()=>[h(ee,null,{header:y(()=>[s("div",Qt,[t[16]||(t[16]=s("h3",{class:"font-bold text-lg text-slate-900 dark:text-white"},"Registrar Pago de Comisión",-1)),h(A,{icon:"i-heroicons-x-mark",color:"gray",variant:"ghost",onClick:t[5]||(t[5]=N=>x.value=!1)})])]),default:y(()=>[I.value?(S(),q("div",Zt,[s("div",ea,[t[18]||(t[18]=s("p",{class:"text-sm text-emerald-800 dark:text-emerald-300"},"Estilista",-1)),s("p",ta,F(I.value.full_name),1),s("div",aa,[t[17]||(t[17]=s("span",null,"Saldo Pendiente:",-1)),s("span",la,F(J(I.value.balance)),1)])]),h(E,{label:"Monto a Pagar"},{default:y(()=>[h(B,{modelValue:o.amount,"onUpdate:modelValue":t[6]||(t[6]=N=>o.amount=N),type:"number",icon:"i-heroicons-currency-dollar"},null,8,["modelValue"])]),_:1}),h(E,{label:"Fecha"},{default:y(()=>[h(B,{modelValue:o.date,"onUpdate:modelValue":t[7]||(t[7]=N=>o.date=N),type:"date"},null,8,["modelValue"])]),_:1}),h(E,{label:"Notas"},{default:y(()=>[h(je,{modelValue:o.notes,"onUpdate:modelValue":t[8]||(t[8]=N=>o.notes=N),placeholder:"Detalles del pago (Transferencia, Efectivo, etc.)"},null,8,["modelValue"])]),_:1}),s("div",na,[h(A,{label:"Cancelar",color:"gray",variant:"ghost",onClick:t[9]||(t[9]=N=>x.value=!1)}),h(A,{label:"Registrar Pago",color:"emerald",loading:O.value,onClick:L},null,8,["loading"])])])):H("",!0)]),_:1})]),_:1},8,["modelValue"])])}}});export{ya as default};
