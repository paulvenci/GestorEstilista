import{b as He,_ as qe}from"./Bn3KjxKb.js";import{d as We,f as _e,u as Ve,_ as xe}from"./BK1iGzOX.js";import{_ as Ke}from"./Dbnl8vwX.js";import{_ as Ye}from"./CtQBUKAt.js";import{_ as Je}from"./Chr3ArP9.js";import{k as K,q as pe,r as C,l as ne,j as Se,m as we,i as P,f as he,p as Xe,F as fe,x as $e,A as Ce,B as se,o as V,c as W,I as ae,D,J as te,G as Q,K as ye,N as be,w as _,b as f,a as n,E as X,L as Qe,n as Ie,C as oe,t as L,d as ke,R as Ze,U as et,a0 as tt,z as at,V as re,e as w}from"./C1tViVxN.js";import{_ as Oe}from"./DlAUqK2U.js";import{c as lt,f as ze,i as Fe,a as E,A as ue,N as Be,T as nt,O as ie,b as R,v as ce,z as st,u as me,e as ot,P as le,k as H,y as rt,_ as it}from"./eJSVvdZN.js";import{s as ut}from"./F2Urmy6C.js";import{u as dt}from"./DSL453eT.js";import{_ as ct}from"./Bqn9jvRv.js";import"./BWX2_Yhy.js";import"./kMxVZpd9.js";const mt={wrapper:"flex items-center -space-x-px",base:"",rounded:"first:rounded-s-md last:rounded-e-md",default:{size:"sm",activeButton:{color:"primary"},inactiveButton:{color:"white"},firstButton:{color:"white",class:"rtl:[&_span:first-child]:rotate-180",icon:"i-heroicons-chevron-double-left-20-solid"},lastButton:{color:"white",class:"rtl:[&_span:last-child]:rotate-180",icon:"i-heroicons-chevron-double-right-20-solid"},prevButton:{color:"white",class:"rtl:[&_span:first-child]:rotate-180",icon:"i-heroicons-chevron-left-20-solid"},nextButton:{color:"white",class:"rtl:[&_span:last-child]:rotate-180",icon:"i-heroicons-chevron-right-20-solid"}}},pt={wrapper:"relative space-y-2",container:"relative w-full",base:"focus:outline-none",list:{base:"relative",background:"bg-gray-100 dark:bg-gray-800",rounded:"rounded-lg",shadow:"",padding:"p-1",height:"h-10",width:"w-full",marker:{wrapper:"absolute top-[4px] left-[4px] duration-200 ease-out focus:outline-none",base:"w-full h-full",background:"bg-white dark:bg-gray-900",rounded:"rounded-md",shadow:"shadow-sm"},tab:{base:"relative inline-flex items-center justify-center flex-shrink-0 w-full ui-focus-visible:outline-0 ui-focus-visible:ring-2 ui-focus-visible:ring-primary-500 dark:ui-focus-visible:ring-primary-400 ui-not-focus-visible:outline-none focus:outline-none disabled:cursor-not-allowed disabled:opacity-75 transition-colors duration-200 ease-out",background:"",active:"text-gray-900 dark:text-white",inactive:"text-gray-500 dark:text-gray-400",height:"h-8",padding:"px-3",size:"text-sm",font:"font-medium",rounded:"rounded-md",shadow:"",icon:"w-4 h-4 flex-shrink-0 me-2"}}};let ft=K({props:{onFocus:{type:Function,required:!0}},setup(e){let b=C(!0);return()=>b.value?pe(ze,{as:"button",type:"button",features:lt.Focusable,onFocus(T){T.preventDefault();let x,m=50;function i(){var a;if(m--<=0){x&&cancelAnimationFrame(x);return}if((a=e.onFocus)!=null&&a.call(e)){b.value=!1,cancelAnimationFrame(x);return}x=requestAnimationFrame(i)}x=requestAnimationFrame(i)}}):null}});var bt=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(bt||{}),vt=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(vt||{});let Ue=Symbol("TabsContext");function de(e){let b=we(Ue,null);if(b===null){let T=new Error(`<${e} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(T,de),T}return b}let Pe=Symbol("TabsSSRContext"),gt=K({name:"TabGroup",emits:{change:e=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:b,attrs:T,emit:x}){var m;let i=C((m=e.selectedIndex)!=null?m:e.defaultIndex),a=C([]),l=C([]),d=P(()=>e.selectedIndex!==null),S=P(()=>d.value?e.selectedIndex:i.value);function k(s){var h;let y=ie(c.tabs.value,E),o=ie(c.panels.value,E),$=y.filter(U=>{var N;return!((N=E(U))!=null&&N.hasAttribute("disabled"))});if(s<0||s>y.length-1){let U=me(i.value===null?0:Math.sign(s-i.value),{[-1]:()=>1,0:()=>me(Math.sign(s),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),N=me(U,{0:()=>y.indexOf($[0]),1:()=>y.indexOf($[$.length-1])});N!==-1&&(i.value=N),c.tabs.value=y,c.panels.value=o}else{let U=y.slice(0,s),N=[...y.slice(s),...U].find(I=>$.includes(I));if(!N)return;let p=(h=y.indexOf(N))!=null?h:c.selectedIndex.value;p===-1&&(p=c.selectedIndex.value),i.value=p,c.tabs.value=y,c.panels.value=o}}let c={selectedIndex:P(()=>{var s,h;return(h=(s=i.value)!=null?s:e.defaultIndex)!=null?h:null}),orientation:P(()=>e.vertical?"vertical":"horizontal"),activation:P(()=>e.manual?"manual":"auto"),tabs:a,panels:l,setSelectedIndex(s){S.value!==s&&x("change",s),d.value||k(s)},registerTab(s){var h;if(a.value.includes(s))return;let y=a.value[i.value];if(a.value.push(s),a.value=ie(a.value,E),!d.value){let o=(h=a.value.indexOf(y))!=null?h:i.value;o!==-1&&(i.value=o)}},unregisterTab(s){let h=a.value.indexOf(s);h!==-1&&a.value.splice(h,1)},registerPanel(s){l.value.includes(s)||(l.value.push(s),l.value=ie(l.value,E))},unregisterPanel(s){let h=l.value.indexOf(s);h!==-1&&l.value.splice(h,1)}};$e(Ue,c);let v=C({tabs:[],panels:[]}),F=C(!1);ne(()=>{F.value=!0}),$e(Pe,P(()=>F.value?null:v.value));let g=P(()=>e.selectedIndex);return ne(()=>{he([g],()=>{var s;return k((s=e.selectedIndex)!=null?s:e.defaultIndex)},{immediate:!0})}),Xe(()=>{if(!d.value||S.value==null||c.tabs.value.length<=0)return;let s=ie(c.tabs.value,E);s.some((h,y)=>E(c.tabs.value[y])!==E(h))&&c.setSelectedIndex(s.findIndex(h=>E(h)===E(c.tabs.value[S.value])))}),()=>{let s={selectedIndex:i.value};return pe(fe,[a.value.length<=0&&pe(ft,{onFocus:()=>{for(let h of a.value){let y=E(h);if(y?.tabIndex===0)return y.focus(),!0}return!1}}),ue({theirProps:{...T,...nt(e,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:s,slots:b,attrs:T,name:"TabGroup"})])}}}),ht=K({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:b,slots:T}){let x=de("TabList");return()=>{let m={selectedIndex:x.selectedIndex.value},i={role:"tablist","aria-orientation":x.orientation.value};return ue({ourProps:i,theirProps:e,slot:m,attrs:b,slots:T,name:"TabList"})}}}),yt=K({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{attrs:b,slots:T,expose:x}){var m;let i=(m=e.id)!=null?m:`headlessui-tabs-tab-${Fe()}`,a=de("Tab"),l=C(null);x({el:l,$el:l}),ne(()=>a.registerTab(l)),Se(()=>a.unregisterTab(l));let d=we(Pe),S=P(()=>{if(d.value){let o=d.value.tabs.indexOf(i);return o===-1?d.value.tabs.push(i)-1:o}return-1}),k=P(()=>{let o=a.tabs.value.indexOf(l);return o===-1?S.value:o}),c=P(()=>k.value===a.selectedIndex.value);function v(o){var $;let U=o();if(U===ce.Success&&a.activation.value==="auto"){let N=($=ot(l))==null?void 0:$.activeElement,p=a.tabs.value.findIndex(I=>E(I)===N);p!==-1&&a.setSelectedIndex(p)}return U}function F(o){let $=a.tabs.value.map(U=>E(U)).filter(Boolean);if(o.key===R.Space||o.key===R.Enter){o.preventDefault(),o.stopPropagation(),a.setSelectedIndex(k.value);return}switch(o.key){case R.Home:case R.PageUp:return o.preventDefault(),o.stopPropagation(),v(()=>le($,H.First));case R.End:case R.PageDown:return o.preventDefault(),o.stopPropagation(),v(()=>le($,H.Last))}if(v(()=>me(a.orientation.value,{vertical(){return o.key===R.ArrowUp?le($,H.Previous|H.WrapAround):o.key===R.ArrowDown?le($,H.Next|H.WrapAround):ce.Error},horizontal(){return o.key===R.ArrowLeft?le($,H.Previous|H.WrapAround):o.key===R.ArrowRight?le($,H.Next|H.WrapAround):ce.Error}}))===ce.Success)return o.preventDefault()}let g=C(!1);function s(){var o;g.value||(g.value=!0,!e.disabled&&((o=E(l))==null||o.focus({preventScroll:!0}),a.setSelectedIndex(k.value),st(()=>{g.value=!1})))}function h(o){o.preventDefault()}let y=ut(P(()=>({as:e.as,type:b.type})),l);return()=>{var o,$;let U={selected:c.value,disabled:(o=e.disabled)!=null?o:!1},{...N}=e,p={ref:l,onKeydown:F,onMousedown:h,onClick:s,id:i,role:"tab",type:y.value,"aria-controls":($=E(a.panels.value[k.value]))==null?void 0:$.id,"aria-selected":c.value,tabIndex:c.value?0:-1,disabled:e.disabled?!0:void 0};return ue({ourProps:p,theirProps:N,slot:U,attrs:b,slots:T,name:"Tab"})}}}),kt=K({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:b,attrs:T}){let x=de("TabPanels");return()=>{let m={selectedIndex:x.selectedIndex.value};return ue({theirProps:e,ourProps:{},slot:m,attrs:T,slots:b,name:"TabPanels"})}}}),_t=K({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(e,{attrs:b,slots:T,expose:x}){var m;let i=(m=e.id)!=null?m:`headlessui-tabs-panel-${Fe()}`,a=de("TabPanel"),l=C(null);x({el:l,$el:l}),ne(()=>a.registerPanel(l)),Se(()=>a.unregisterPanel(l));let d=we(Pe),S=P(()=>{if(d.value){let v=d.value.panels.indexOf(i);return v===-1?d.value.panels.push(i)-1:v}return-1}),k=P(()=>{let v=a.panels.value.indexOf(l);return v===-1?S.value:v}),c=P(()=>k.value===a.selectedIndex.value);return()=>{var v;let F={selected:c.value},{tabIndex:g,...s}=e,h={ref:l,id:i,role:"tabpanel","aria-labelledby":(v=E(a.tabs.value[k.value]))==null?void 0:v.id,tabIndex:c.value?g:-1};return!c.value&&e.unmount&&!e.static?pe(ze,{as:"span","aria-hidden":!0,...h}):ue({ourProps:h,theirProps:s,slot:F,attrs:b,slots:T,features:Be.Static|Be.RenderStrategy,visible:c.value,name:"TabPanel"})}}});const J=Ce(se.ui.strategy,se.ui.pagination,mt),xt=Ce(se.ui.strategy,se.ui.button,We),wt=K({components:{UButton:_e},inheritAttrs:!1,props:{modelValue:{type:Number,required:!0},pageCount:{type:Number,default:10},total:{type:Number,required:!0},max:{type:Number,default:7,validate(e){return e>=5&&e<Number.MAX_VALUE}},disabled:{type:Boolean,default:!1},size:{type:String,default:()=>J.default.size,validator(e){return Object.keys(xt.size).includes(e)}},to:{type:Function,default:null},activeButton:{type:Object,default:()=>J.default.activeButton},inactiveButton:{type:Object,default:()=>J.default.inactiveButton},showFirst:{type:Boolean,default:!1},showLast:{type:Boolean,default:!1},firstButton:{type:Object,default:()=>J.default.firstButton},lastButton:{type:Object,default:()=>J.default.lastButton},prevButton:{type:Object,default:()=>J.default.prevButton},nextButton:{type:Object,default:()=>J.default.nextButton},divider:{type:String,default:"…"},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{emit:b}){const{ui:T,attrs:x}=Ve("pagination",be(e,"ui"),J,be(e,"class")),m=P({get(){return e.modelValue},set(g){b("update:modelValue",g)}}),i=P(()=>Array.from({length:Math.ceil(e.total/e.pageCount)},(g,s)=>s+1)),a=P(()=>{const g=i.value.length,s=m.value,h=Math.max(e.max,5),y=Math.floor((Math.min(h,g)-5)/2),o=s-y,$=s+y,U=o-1>1,N=$+1<g,p=[];if(g<=h){for(let I=1;I<=g;I++)p.push(I);return p}if(p.push(1),U&&p.push(e.divider),!N){const I=s+y+2-g;for(let M=s-y-I;M<=s-y-1;M++)p.push(M)}for(let I=Math.max(2,o);I<=Math.min(g,$);I++)p.push(I);if(!U){const I=1-(s-y-2);for(let M=s+y+1;M<=s+y+I;M++)p.push(M)}return N&&p.push(e.divider),$<g&&p.push(g),p.length>=3&&p[1]===e.divider&&p[2]===3&&(p[1]=2),p.length>=3&&p[p.length-2]===e.divider&&p[p.length-1]===p.length&&(p[p.length-2]=p.length-1),p}),l=P(()=>m.value>1),d=P(()=>m.value<i.value.length);function S(){l.value&&(m.value=1)}function k(){d.value&&(m.value=i.value.length)}function c(g){typeof g!="string"&&(m.value=g)}function v(){l.value&&m.value--}function F(){d.value&&m.value++}return{ui:T,attrs:x,currentPage:m,pages:i,displayedPages:a,canGoLastOrNext:d,canGoFirstOrPrev:l,onClickPrev:v,onClickNext:F,onClickPage:c,onClickFirst:S,onClickLast:k}}});function Ct(e,b,T,x,m,i){const a=_e;return V(),W("div",te({class:e.ui.wrapper},e.attrs),[ae(e.$slots,"first",{onClick:e.onClickFirst,canGoFirst:e.canGoFirstOrPrev},()=>[e.firstButton&&e.showFirst?(V(),D(a,te({key:0,size:e.size,to:e.to?.(1),disabled:!e.canGoFirstOrPrev||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.firstButton||{},...e.firstButton},{ui:{rounded:""},"aria-label":"First",onClick:e.onClickFirst}),null,16,["size","to","disabled","class","onClick"])):Q("",!0)]),ae(e.$slots,"prev",{onClick:e.onClickPrev,canGoPrev:e.canGoFirstOrPrev},()=>[e.prevButton?(V(),D(a,te({key:0,size:e.size,to:e.to?.(e.currentPage-1),disabled:!e.canGoFirstOrPrev||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.prevButton||{},...e.prevButton},{ui:{rounded:""},"aria-label":"Prev",onClick:e.onClickPrev}),null,16,["size","to","disabled","class","onClick"])):Q("",!0)]),(V(!0),W(fe,null,ye(e.displayedPages,(l,d)=>(V(),D(a,te({key:`${l}-${d}`,to:typeof l=="number"?e.to?.(l):null,size:e.size,disabled:e.disabled,label:`${l}`},{ref_for:!0},l===e.currentPage?{...e.ui.default.activeButton||{},...e.activeButton}:{...e.ui.default.inactiveButton||{},...e.inactiveButton},{class:[{"pointer-events-none":typeof l=="string","z-[1]":l===e.currentPage},e.ui.base,e.ui.rounded],ui:{rounded:""},onClick:()=>e.onClickPage(l)}),null,16,["to","size","disabled","label","class","onClick"]))),128)),ae(e.$slots,"next",{onClick:e.onClickNext,canGoNext:e.canGoLastOrNext},()=>[e.nextButton?(V(),D(a,te({key:0,size:e.size,to:e.to?.(e.currentPage+1),disabled:!e.canGoLastOrNext||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.nextButton||{},...e.nextButton},{ui:{rounded:""},"aria-label":"Next",onClick:e.onClickNext}),null,16,["size","to","disabled","class","onClick"])):Q("",!0)]),ae(e.$slots,"last",{onClick:e.onClickLast,canGoLast:e.canGoLastOrNext},()=>[e.lastButton&&e.showLast?(V(),D(a,te({key:0,size:e.size,to:e.to?.(e.pages.length),disabled:!e.canGoLastOrNext||e.disabled,class:[e.ui.base,e.ui.rounded]},{...e.ui.default.lastButton||{},...e.lastButton},{ui:{rounded:""},"aria-label":"Last",onClick:e.onClickLast}),null,16,["size","to","disabled","class","onClick"])):Q("",!0)])],16)}const Pt=Oe(wt,[["render",Ct]]),Tt=Ce(se.ui.strategy,se.ui.tabs,pt),$t=K({components:{UIcon:xe,HTabGroup:gt,HTabList:ht,HTab:yt,HTabPanels:kt,HTabPanel:_t},inheritAttrs:!1,props:{modelValue:{type:Number,default:void 0},orientation:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},defaultIndex:{type:Number,default:0},items:{type:Array,default:()=>[]},unmount:{type:Boolean,default:!1},content:{type:Boolean,default:!0},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:b}){const{ui:T,attrs:x}=Ve("tabs",be(e,"ui"),Tt,be(e,"class")),m=C(),i=C([]),a=C(),l=C(e.modelValue||e.defaultIndex);function d(k){const c=i.value[k]?.$el;c&&a.value&&(a.value.style.top=`${c.offsetTop}px`,a.value.style.left=`${c.offsetLeft}px`,a.value.style.width=`${c.offsetWidth}px`,a.value.style.height=`${c.offsetHeight}px`)}function S(k){l.value=k,b("change",k),e.modelValue!==void 0&&b("update:modelValue",l.value),d(l.value)}return dt(m,()=>{d(l.value)}),he(()=>e.modelValue,k=>{l.value=k,d(l.value)}),he(()=>e.items,async()=>{await Ie(),d(l.value)},{deep:!0}),ne(async()=>{await Ie(),d(l.value)}),rt(()=>Ze()),{ui:T,attrs:x,listRef:m,itemRefs:i,markerRef:a,selectedIndex:l,onChange:S}}}),It=["aria-label"],Bt={class:"truncate"};function Vt(e,b,T,x,m,i){const a=xe,l=oe("HTab"),d=oe("HTabList"),S=oe("HTabPanel"),k=oe("HTabPanels"),c=oe("HTabGroup");return V(),D(c,te({vertical:e.orientation==="vertical","selected-index":e.selectedIndex,as:"div",class:e.ui.wrapper},e.attrs,{onChange:e.onChange}),{default:_(()=>[f(d,{ref:"listRef",class:X([e.ui.list.base,e.ui.list.background,e.ui.list.rounded,e.ui.list.shadow,e.ui.list.padding,e.ui.list.width,e.orientation==="horizontal"&&e.ui.list.height,e.orientation==="horizontal"&&"inline-grid items-center"]),style:Qe([e.orientation==="horizontal"&&`grid-template-columns: repeat(${e.items.length}, minmax(0, 1fr))`])},{default:_(()=>[n("div",{ref:"markerRef",class:X(e.ui.list.marker.wrapper)},[n("div",{class:X([e.ui.list.marker.base,e.ui.list.marker.background,e.ui.list.marker.rounded,e.ui.list.marker.shadow])},null,2)],2),(V(!0),W(fe,null,ye(e.items,(v,F)=>(V(),D(l,{key:F,ref_for:!0,ref:"itemRefs",disabled:v.disabled,as:"template"},{default:_(({selected:g,disabled:s})=>[n("button",{"aria-label":v.ariaLabel,class:X([e.ui.list.tab.base,e.ui.list.tab.background,e.ui.list.tab.height,e.ui.list.tab.padding,e.ui.list.tab.size,e.ui.list.tab.font,e.ui.list.tab.rounded,e.ui.list.tab.shadow,g?e.ui.list.tab.active:e.ui.list.tab.inactive])},[ae(e.$slots,"icon",{item:v,index:F,selected:g,disabled:s},()=>[v.icon?(V(),D(a,{key:0,name:v.icon,class:X(e.ui.list.tab.icon)},null,8,["name","class"])):Q("",!0)]),ae(e.$slots,"default",{item:v,index:F,selected:g,disabled:s},()=>[n("span",Bt,L(v.label),1)])],10,It)]),_:2},1032,["disabled"]))),128))]),_:3},8,["class","style"]),e.content?(V(),D(k,{key:0,class:X(e.ui.container)},{default:_(()=>[(V(!0),W(fe,null,ye(e.items,(v,F)=>(V(),D(S,{key:F,class:X(e.ui.base),unmount:e.unmount},{default:_(({selected:g})=>[ae(e.$slots,v.slot||"item",{item:v,index:F,selected:g},()=>[ke(L(v.content),1)])]),_:2},1032,["class","unmount"]))),128))]),_:3},8,["class"])):Q("",!0)]),_:3},16,["vertical","selected-index","class","onChange"])}const St=Oe($t,[["render",Vt]]),Ot={class:"space-y-6"},zt={class:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4"},Ft={class:"flex flex-col md:flex-row gap-2 w-full md:w-auto"},Ut={class:"flex gap-2"},Nt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Lt={class:"flex items-center gap-4"},jt={class:"p-3 bg-emerald-100 dark:bg-emerald-800 rounded-full"},Et={class:"text-2xl font-bold text-emerald-900 dark:text-white"},Gt={class:"flex items-center gap-4"},Dt={class:"p-3 bg-blue-100 dark:bg-blue-800 rounded-full"},At={class:"text-2xl font-bold text-blue-900 dark:text-white"},Mt={class:"flex items-center gap-4"},Rt={class:"p-3 bg-purple-100 dark:bg-purple-800 rounded-full"},Ht={class:"text-2xl font-bold text-purple-900 dark:text-white"},qt={class:"p-4 border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-800/50 flex justify-between items-center"},Wt={class:"flex items-center gap-2"},Kt={class:"font-bold text-emerald-600 dark:text-emerald-400"},Yt={class:"text-slate-500 text-xs"},Jt={class:"p-4 border-t border-slate-100 dark:border-slate-800 flex justify-center"},Xt={class:"font-bold text-slate-600 dark:text-slate-400"},Qt={class:"font-bold text-purple-600 dark:text-purple-400"},Zt={class:"font-bold text-emerald-600 dark:text-emerald-400"},ea={class:"flex flex-col gap-1"},ta={class:"flex items-center gap-2 text-xs"},aa=["onClick"],la={class:"flex items-center gap-2 text-xs"},na=["onClick"],sa={key:1,class:"flex gap-1"},oa={class:"flex justify-between items-center"},ra={key:0,class:"space-y-4"},ia={class:"p-3 bg-emerald-50 dark:bg-emerald-900/20 rounded border border-emerald-100 dark:border-emerald-800"},ua={class:"text-lg font-bold text-emerald-900 dark:text-white"},da={class:"flex justify-between mt-2 text-sm"},ca={class:"font-bold"},ma={class:"flex justify-end gap-2 pt-4"},ge=10,Ta=K({__name:"sales",setup(e){const b=et(),T=tt("headerTitle",()=>"Caja");T.value="Caja";const x=new Date,m=C(new Date(x.getFullYear(),x.getMonth(),1).toISOString().slice(0,10)),i=C(new Date(x.getFullYear(),x.getMonth()+1,0).toISOString().slice(0,10)),a=C(""),l=C(1),d=C({column:"created_at",direction:"desc"}),S=C(!1),k=C([]),c=C([]),v=C([]),F=[{key:"transactions",label:"Transacciones",icon:"i-heroicons-list-bullet"},{key:"stylists",label:"Reporte y Equipo",icon:"i-heroicons-user-group"}],g=P(()=>{let r=[...k.value];if(a.value){const t=a.value.toLowerCase();r=r.filter(B=>B.client?.full_name?.toLowerCase().includes(t)||B.profiles?.full_name?.toLowerCase().includes(t)||B.payment_method?.toLowerCase().includes(t))}return d.value&&r.sort((t,B)=>{let z=t[d.value.column],G=B[d.value.column];return d.value.column==="client.full_name"?(z=t.client?.full_name,G=B.client?.full_name):d.value.column==="profiles.full_name"&&(z=t.profiles?.full_name,G=B.profiles?.full_name),z<G?d.value.direction==="asc"?-1:1:z>G?d.value.direction==="asc"?1:-1:0}),r}),s=P(()=>{const r=(l.value-1)*ge,t=r+ge;return g.value.slice(r,t)}),h=[{key:"created_at",label:"Fecha",sortable:!0},{key:"client.full_name",label:"Cliente",sortable:!0},{key:"profiles.full_name",label:"Estilista",sortable:!0},{key:"payment_method",label:"Método",sortable:!0},{key:"total_amount",label:"Monto",sortable:!0},{key:"commission_amount",label:"Comisión",sortable:!0}],y=[{key:"full_name",label:"Estilista"},{key:"transaction_count",label:"Citas"},{key:"total_commissions",label:"Ganado"},{key:"total_paid",label:"Pagado"},{key:"balance",label:"Pendiente"},{key:"commission_rate",label:"% Comisiones"},{key:"actions",label:""}],o=async()=>{S.value=!0;const{data:{user:r}}=await b.auth.getUser();if(!r){S.value=!1;return}const{data:t,error:B}=await b.from("transactions").select("*, clients(full_name), profiles(full_name)").gte("created_at",`${m.value}T00:00:00`).lte("created_at",`${i.value}T23:59:59`).order("created_at",{ascending:!1});t&&(k.value=t);const{data:z}=await b.from("commission_payouts").select("*").gte("date",m.value).lte("date",i.value);z&&(c.value=z);const{data:G}=await b.from("profiles").select("*");G&&(v.value=G.map(O=>({...O,editing:!1,temp_rate:O.commission_rate,temp_product_rate:O.product_commission_rate||0}))),S.value=!1},$=P(()=>k.value.reduce((r,t)=>r+(Number(t.total_amount)||0),0)),U=P(()=>k.value.reduce((r,t)=>r+(Number(t.commission_amount)||0),0)),N=P(()=>v.value.map(r=>{const t=k.value.filter(O=>O.stylist_id===r.id),B=c.value.filter(O=>O.stylist_id===r.id),z=t.reduce((O,ee)=>O+(Number(ee.commission_amount)||0),0),G=B.reduce((O,ee)=>O+(Number(ee.amount)||0),0);return{...r,transaction_count:t.length,total_sales:t.reduce((O,ee)=>O+(Number(ee.total_amount)||0),0),total_commissions:z,total_paid:G,balance:z-G}})),p=async r=>{const{error:t}=await b.from("profiles").update({commission_rate:r.temp_rate,product_commission_rate:r.temp_product_rate}).eq("id",r.id);t||(r.commission_rate=r.temp_rate,r.product_commission_rate=r.temp_product_rate,r.editing=!1)},I=C(!1),M=C(!1),Z=C(null),A=at({amount:0,notes:"",date:new Date().toISOString().slice(0,10)}),Ne=r=>{Z.value=r,A.amount=r.balance>0?r.balance:0,A.notes="",A.date=new Date().toISOString().slice(0,10),I.value=!0},Le=async()=>{if(!Z.value)return;M.value=!0;const{data:{user:r}}=await b.auth.getUser(),t=Z.value.tenant_id;try{const{error:B}=await b.from("commission_payouts").insert({tenant_id:t,stylist_id:Z.value.id,amount:A.amount,notes:A.notes,date:A.date});if(B)throw B;alert("Pago registrado correctamente"),I.value=!1,o()}catch(B){alert("Error al registrar pago: "+B.message)}finally{M.value=!1}},q=r=>new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP",minimumFractionDigits:0}).format(r),je=r=>new Date(r).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}),Ee=r=>({cash:"Efectivo",card:"Tarjeta",transfer:"Transferencia",other:"Otro"})[r]||r,Ge=r=>({cash:"green",card:"blue",transfer:"purple",other:"gray"})[r]||"gray";return ne(()=>{o()}),(r,t)=>{const B=He,z=_e,G=xe,O=Ke,ee=Ye,Te=Je,De=Pt,Ae=St,ve=qe,Me=ct,Re=it;return V(),W("div",Ot,[n("div",zt,[t[11]||(t[11]=n("div",{class:"hidden md:block"},[n("h1",{class:"text-xl md:text-3xl font-extrabold text-slate-900 dark:text-white tracking-tight"},"Caja y Ventas"),n("p",{class:"text-slate-500 dark:text-slate-400"},"Registro de transacciones y comisiones")],-1)),n("div",Ft,[n("div",Ut,[f(B,{modelValue:w(m),"onUpdate:modelValue":t[0]||(t[0]=j=>re(m)?m.value=j:null),type:"date",class:"w-full md:w-auto"},null,8,["modelValue"]),f(B,{modelValue:w(i),"onUpdate:modelValue":t[1]||(t[1]=j=>re(i)?i.value=j:null),type:"date",class:"w-full md:w-auto"},null,8,["modelValue"])]),f(z,{icon:"i-heroicons-funnel",label:"Filtrar",color:"emerald",onClick:o,loading:w(S)},null,8,["loading"])])]),n("div",Nt,[f(O,{ui:{background:"bg-emerald-50 dark:bg-emerald-900/20",ring:"ring-1 ring-emerald-200 dark:ring-emerald-800"}},{default:_(()=>[n("div",Lt,[n("div",jt,[f(G,{name:"i-heroicons-currency-dollar",class:"text-3xl text-emerald-600 dark:text-emerald-300"})]),n("div",null,[t[12]||(t[12]=n("p",{class:"text-sm font-medium text-emerald-600 dark:text-emerald-400"},"Ventas Totales (Mes)",-1)),n("p",Et,L(q(w($))),1)])])]),_:1}),f(O,{ui:{background:"bg-blue-50 dark:bg-blue-900/20",ring:"ring-1 ring-blue-200 dark:ring-blue-800"}},{default:_(()=>[n("div",Gt,[n("div",Dt,[f(G,{name:"i-heroicons-user-group",class:"text-3xl text-blue-600 dark:text-blue-300"})]),n("div",null,[t[13]||(t[13]=n("p",{class:"text-sm font-medium text-blue-600 dark:text-blue-400"},"Transacciones",-1)),n("p",At,L(w(k).length),1)])])]),_:1}),f(O,{ui:{background:"bg-purple-50 dark:bg-purple-900/20",ring:"ring-1 ring-purple-200 dark:ring-purple-800"}},{default:_(()=>[n("div",Mt,[n("div",Rt,[f(G,{name:"i-heroicons-banknotes",class:"text-3xl text-purple-600 dark:text-purple-300"})]),n("div",null,[t[14]||(t[14]=n("p",{class:"text-sm font-medium text-purple-600 dark:text-purple-400"},"Comisiones Totales",-1)),n("p",Ht,L(q(w(U))),1)])])]),_:1})]),f(Ae,{items:F,class:"w-full"},{item:_(({item:j})=>[j.key==="transactions"?(V(),D(O,{key:0,shadow:"md",ui:{body:{padding:"p-0"},background:"bg-white dark:bg-slate-900",ring:"ring-1 ring-slate-200 dark:ring-slate-800"}},{default:_(()=>[n("div",qt,[t[15]||(t[15]=n("h3",{class:"font-bold text-slate-700 dark:text-slate-300"},"Historial de Transacciones",-1)),n("div",Wt,[f(B,{modelValue:w(a),"onUpdate:modelValue":t[2]||(t[2]=u=>re(a)?a.value=u:null),icon:"i-heroicons-magnifying-glass",placeholder:"Buscar cliente, estilista...",size:"sm"},null,8,["modelValue"]),f(z,{icon:"i-heroicons-arrow-path",variant:"ghost",color:"gray",onClick:o,loading:w(S)},null,8,["loading"])])]),f(Te,{rows:w(s),columns:h,loading:w(S),sort:w(d),"onUpdate:sort":t[3]||(t[3]=u=>d.value=u),"sort-mode":"manual",class:"w-full",ui:{divide:"divide-y divide-slate-200 dark:divide-slate-800",th:{color:"text-slate-900 dark:text-white"},td:{color:"text-slate-500 dark:text-slate-400"}}},{"total_amount-data":_(({row:u})=>[n("span",Kt,L(q(u.total_amount)),1)]),"commission_amount-data":_(({row:u})=>[n("span",Yt,L(q(u.commission_amount)),1)]),"created_at-data":_(({row:u})=>[ke(L(je(u.created_at)),1)]),"payment_method-data":_(({row:u})=>[f(ee,{color:Ge(u.payment_method),variant:"subtle"},{default:_(()=>[ke(L(Ee(u.payment_method)),1)]),_:2},1032,["color"])]),_:1},8,["rows","loading","sort"]),n("div",Jt,[f(De,{modelValue:w(l),"onUpdate:modelValue":t[4]||(t[4]=u=>re(l)?l.value=u:null),"page-count":ge,total:w(g).length},null,8,["modelValue","total"])])]),_:1})):j.key==="stylists"?(V(),D(O,{key:1,shadow:"md",ui:{body:{padding:"p-0"},background:"bg-white dark:bg-slate-900",ring:"ring-1 ring-slate-200 dark:ring-slate-800"}},{default:_(()=>[t[18]||(t[18]=n("div",{class:"p-4 border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-800/50"},[n("h3",{class:"font-bold text-slate-700 dark:text-slate-300"},"Rendimiento por Estilista")],-1)),f(Te,{rows:w(N),columns:y,loading:w(S),ui:{divide:"divide-y divide-slate-200 dark:divide-slate-800",th:{color:"text-slate-900 dark:text-white"},td:{color:"text-slate-500 dark:text-slate-400"}}},{"total_sales-data":_(({row:u})=>[n("span",Xt,L(q(u.total_sales)),1)]),"total_commissions-data":_(({row:u})=>[n("span",Qt,L(q(u.total_commissions)),1)]),"total_paid-data":_(({row:u})=>[n("span",Zt,L(q(u.total_paid)),1)]),"balance-data":_(({row:u})=>[n("span",{class:X(u.balance>0?"text-amber-600 font-bold":"text-slate-400")},L(q(u.balance)),3)]),"commission_rate-data":_(({row:u})=>[n("div",ea,[n("div",ta,[t[16]||(t[16]=n("span",{class:"text-slate-500 w-16"},"Servicios:",-1)),u.editing?(V(),D(B,{key:1,modelValue:u.temp_rate,"onUpdate:modelValue":Y=>u.temp_rate=Y,type:"number",size:"2xs",class:"w-14"},null,8,["modelValue","onUpdate:modelValue"])):(V(),W("span",{key:0,onClick:Y=>u.editing=!0,class:"cursor-pointer hover:underline decoration-dashed font-medium"},L(u.commission_rate)+"%",9,aa))]),n("div",la,[t[17]||(t[17]=n("span",{class:"text-slate-500 w-16"},"Productos:",-1)),u.editing?(V(),W("div",sa,[f(B,{modelValue:u.temp_product_rate,"onUpdate:modelValue":Y=>u.temp_product_rate=Y,type:"number",size:"2xs",class:"w-14"},null,8,["modelValue","onUpdate:modelValue"]),f(z,{icon:"i-heroicons-check",size:"2xs",color:"emerald",onClick:Y=>p(u)},null,8,["onClick"]),f(z,{icon:"i-heroicons-x-mark",size:"2xs",color:"gray",variant:"ghost",onClick:Y=>u.editing=!1},null,8,["onClick"])])):(V(),W("span",{key:0,onClick:Y=>u.editing=!0,class:"cursor-pointer hover:underline decoration-dashed font-medium"},L(u.product_commission_rate||0)+"%",9,na))])])]),"actions-data":_(({row:u})=>[f(z,{label:"Pagar",size:"xs",color:"emerald",variant:"soft",icon:"i-heroicons-banknotes",onClick:Y=>Ne(u),disabled:u.balance<=0},null,8,["onClick","disabled"])]),_:1},8,["rows","loading"])]),_:1})):Q("",!0)]),_:1}),f(Re,{modelValue:w(I),"onUpdate:modelValue":t[10]||(t[10]=j=>re(I)?I.value=j:null)},{default:_(()=>[f(O,null,{header:_(()=>[n("div",oa,[t[19]||(t[19]=n("h3",{class:"font-bold text-lg text-slate-900 dark:text-white"},"Registrar Pago de Comisión",-1)),f(z,{icon:"i-heroicons-x-mark",color:"gray",variant:"ghost",onClick:t[5]||(t[5]=j=>I.value=!1)})])]),default:_(()=>[w(Z)?(V(),W("div",ra,[n("div",ia,[t[21]||(t[21]=n("p",{class:"text-sm text-emerald-800 dark:text-emerald-300"},"Estilista",-1)),n("p",ua,L(w(Z).full_name),1),n("div",da,[t[20]||(t[20]=n("span",null,"Saldo Pendiente:",-1)),n("span",ca,L(q(w(Z).balance)),1)])]),f(ve,{label:"Monto a Pagar"},{default:_(()=>[f(B,{modelValue:w(A).amount,"onUpdate:modelValue":t[6]||(t[6]=j=>w(A).amount=j),type:"number",icon:"i-heroicons-currency-dollar"},null,8,["modelValue"])]),_:1}),f(ve,{label:"Fecha"},{default:_(()=>[f(B,{modelValue:w(A).date,"onUpdate:modelValue":t[7]||(t[7]=j=>w(A).date=j),type:"date"},null,8,["modelValue"])]),_:1}),f(ve,{label:"Notas"},{default:_(()=>[f(Me,{modelValue:w(A).notes,"onUpdate:modelValue":t[8]||(t[8]=j=>w(A).notes=j),placeholder:"Detalles del pago (Transferencia, Efectivo, etc.)"},null,8,["modelValue"])]),_:1}),n("div",ma,[f(z,{label:"Cancelar",color:"gray",variant:"ghost",onClick:t[9]||(t[9]=j=>I.value=!1)}),f(z,{label:"Registrar Pago",color:"emerald",loading:w(M),onClick:Le},null,8,["loading"])])])):Q("",!0)]),_:1})]),_:1},8,["modelValue"])])}}});export{Ta as default};
